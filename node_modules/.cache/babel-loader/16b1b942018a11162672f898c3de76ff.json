{"ast":null,"code":"var _jsxFileName = \"/Users/andychenhe/Desktop/mydoc_25/src/App.js\";\nimport React from \"react\";\nimport \"./css/login.css\";\nimport axios from \"axios\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\";\nimport AuthRoute from \"./util/AuthRoute\";\nimport { useState } from \"react\"; // material ui theme\n\nimport { ThemeProvider as MuiThemeProvider } from \"@material-ui/core/styles\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport themeFile from \"./util/theme\"; //redux\n\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\nimport { SET_AUTHENTICATED } from \"./redux/types\";\nimport { logoutUser, getUserData } from \"./redux/actions/userActions\"; // pages\n\nimport Home from \"./pages/Home\";\nimport login from \"./pages/Login\";\nimport signup from \"./pages/Signup\";\nimport covid from \"./pages/Covid\";\nimport Results from \"./pages/Results\"; // use themeFile from theme.js\n\nconst theme = createMuiTheme(themeFile); // set up api\n\naxios.defaults.baseURL = \"https://us-central1-mydoc-f3cd9.cloudfunctions.net/api/\"; // backend stuff\n\nconst token = localStorage.FBIdToken;\nstore.dispatch(getUserData());\n\nif (token) {\n  const decodedToken = jwtDecode(token); // log user out when expire\n\n  if (decodedToken.exp * 1000 < Date.now()) {\n    store.dispatch(logoutUser());\n    window.location.href = \"/login\";\n  } else {\n    store.dispatch({\n      type: SET_AUTHENTICATED\n    });\n    axios.defaults.headers.common[\"Authorization\"] = token; //deal with page refresh\n\n    store.dispatch(getUserData()); // get user data if logged in\n  }\n} // set up material ui theme\n// route to home/login/sign up\n\n\nfunction App() {\n  const [docInfo, setDocInfo] = useState([]);\n  const [hospitalInfo, sethospitalInfo] = useState([]);\n  const [docInfoCopy, setDocInfoCopy] = useState([]);\n  const [hospitalInfoCopy, sethospitalInfoCopy] = useState([]);\n  const [searchMethod, setSearchMethod] = React.useState(\"Specialty\");\n  const [keywords, setKeywords] = React.useState('');\n  const [location, setLocation] = React.useState('');\n  const [searchBegin, setSearchBegin] = React.useState(false);\n  const [hosType, setHosType] = React.useState('both');\n  const [LanguageList, setLanguageList] = React.useState([]);\n  const [yearOfPractice, setyearOfPractice] = React.useState([-1, -1]);\n  const [filterlocation, setFilterlocation] = React.useState([]);\n\n  const getLocationValue = value => {\n    setLocation(value);\n  };\n\n  const getKeyWords = value => {\n    setKeywords(value);\n  };\n\n  const getSearchMethod = value => {\n    setSearchMethod(value);\n    setKeywords('');\n  };\n\n  const startSearch = () => {\n    setSearchBegin(true);\n  };\n\n  const filterHosType = type => {\n    console.log(type);\n    setHosType(type);\n    filterFunction();\n  };\n\n  const filterFunction = () => {\n    console.log('filter begin');\n    let newDocList = [];\n    let newHospitalList = [];\n    docInfoCopy.forEach(doctor => {\n      let validateType = doctor['Type'].toLowerCase() == hosType || doctor['Type'].toLowerCase() == 'both';\n      console.log(doctor['Type'].toLowerCase() == hosType);\n\n      if (validateType) {\n        newDocList.push(doctor);\n      }\n    });\n    console.log(newDocList);\n    setDocInfo(newDocList);\n  };\n\n  const doMainSearch = pageProps => {\n    if (searchBegin) {\n      let rootData = {\n        \"Specialty\": [{\n          \"Name\": \"Gastroenterology\",\n          \"Condition\": [\"Fever\", \"Headache\"],\n          \"Hospital\": [{\n            \"HospitalName\": \"Pantai Hospital Kuala Lumpur\",\n            \"HospitalType\": \"Private\",\n            \"likes\": 10000000,\n            \"RelateSpecialty\": \"Gastroenterology\",\n            \"Web\": \"https://www.pantai.com.my/kuala-lumpur\",\n            \"Hours\": \"24 hours\",\n            \"Address\": \"8, Jalan Bukit Pantai 59100 Kuala Lumpur\",\n            \"Zip\": \"92310\",\n            \"Phone\": \"+603-2296 0888\",\n            \"Tags\": [{\n              \"TagName\": \"Customer Service\",\n              \"Number\": 2\n            }, {\n              \"TagName\": \"Facility\",\n              \"Number\": 3\n            }, {\n              \"TagName\": \"Friendly\",\n              \"Number\": 5\n            }],\n            \"Insurance\": [\"Asia Assistance Network\", \"AIA\", \"AIA - Employee Benefit\", \"AIA Datalink\"],\n            \"Doctors\": [{\n              \"DocName\": \"Alex Leow\",\n              \"Specialty\": \"Gastroenterology\",\n              \"Hospital\": \"Pantai Hospital Kuala Lumpur\",\n              \"YearsofPractice\": 7,\n              \"Address\": \"No. A103a - Endoscopy Centre, 1st Floor, Block A, 8, Jalan Bukit Pantai 59100 Kuala Lumpur\",\n              \"Phone\": \" +603-2296 0763 Ext. 2763\",\n              \"Tags\": [{\n                \"TagName\": \"Bedside Manner\",\n                \"Number\": 1\n              }, {\n                \"TagName\": \"Enthusiastic\",\n                \"Number\": 10\n              }, {\n                \"TagName\": \"Friendly\",\n                \"Number\": 5\n              }],\n              \"Appointment\": {\n                \"Onsite\": {\n                  \"Status\": \"Active\"\n                },\n                \"PhoneCall\": {\n                  \"Content\": \"206-123-4567\",\n                  \"Status\": \"\"\n                },\n                \"Online\": {\n                  \"Content\": \"https://www.pantai.com.my/kuala-lumpur\",\n                  \"Status\": \"Active\"\n                },\n                \"Email\": {\n                  \"Content\": \"chenh57@uw.edu\",\n                  \"Status\": \"Active\"\n                }\n              },\n              \"Qulification\": \"MMed (Mal), MB. BCh. BAO. (Hons) LRCPI & LRCSI (Ire), B. Biomed Sci. (Hons) (UM)\",\n              \"Language\": [\"English\", \"Mandarin\", \"Malay\", \"Hokkien\", \"Cantonese\"],\n              \"Type\": \"Private\",\n              \"Procedures\": [\"Colonoscopy\", \"Gastroscopy\", \"Endoscopic Retrograde Cholangiopancreatography (ERCP)\", \"Fibroscan\", \"Liver Biopsy\", \"Endoscopic Ultrasound (EUS)\", \"Small Bowel Enteroscopy\", \"Capsule Endoscopy\"],\n              \"Conditions\": [\"Helicobacter Pylori Infection\", \"Dyspepsia\", \"Gastro Esophageal Reflux Disease\", \"Fever\"],\n              \"NumberOfLikes\": 12315\n            }, {\n              \"DocName\": \"Alex Tan\",\n              \"Specialty\": \"Gastroenterology\",\n              \"Hospital\": \"Pantai Hospital Kuala Lumpur\",\n              \"YearsofPractice\": 7,\n              \"Address\": \"No. A103a - Endoscopy Centre, 1st Floor, Block A, 8, Jalan Bukit Pantai 59100 Kuala Lumpur\",\n              \"Phone\": \" +603-123-2131\",\n              \"Tags\": [{\n                \"TagName\": \"Bedside Manner\",\n                \"Number\": 1\n              }, {\n                \"TagName\": \"Enthusiastic\",\n                \"Number\": 10\n              }, {\n                \"TagName\": \"Friendly\",\n                \"Number\": 5\n              }],\n              \"Appointment\": {\n                \"Onsite\": {\n                  \"Status\": \"Active\"\n                },\n                \"PhoneCall\": {\n                  \"Content\": \"206-123-4567\",\n                  \"Status\": \"\"\n                },\n                \"Online\": {\n                  \"Content\": \"https://www.pantai.com.my/kuala-lumpur\",\n                  \"Status\": \"Active\"\n                },\n                \"Email\": {\n                  \"Content\": \"chenh57@uw.edu\",\n                  \"Status\": \"Active\"\n                }\n              },\n              \"Qulification\": \"MMed (Mal), MB. BCh. BAO. (Hons) LRCPI & LRCSI (Ire), B. Biomed Sci. (Hons) (UM)\",\n              \"Language\": [\"English\", \"Cantonese\"],\n              \"Type\": \"Private\",\n              \"Procedures\": [\"Colonoscopy\", \"Gastroscopy\", \"Endoscopic Retrograde Cholangiopancreatography (ERCP)\", \"Fibroscan\", \"Liver Biopsy\", \"Endoscopic Ultrasound (EUS)\", \"Small Bowel Enteroscopy\", \"Capsule Endoscopy\"],\n              \"Conditions\": [\"Helicobacter Pylori Infection\", \"Dyspepsia\", \"Gastro Esophageal Reflux Disease\"],\n              \"NumberOfLikes\": 2333\n            }]\n          }]\n        }]\n      };\n      let newDocData = [];\n      let newHosData = [];\n      let userKeyWords = keywords.replace(\" \", \"\").toLowerCase();\n      let locationInfo = location.replace(\" \", \"\");\n\n      if (searchMethod == 'Specialty') {\n        if (locationInfo == '') {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let specialtyName = specialtyItem['Name'];\n            specialtyName = specialtyName.replace(\" \", \"\").toLowerCase();\n\n            if (userKeyWords == specialtyName) {\n              specialtyItem['Hospital'].forEach(hospital => {\n                newHosData.push(hospital);\n                newDocData.push.apply(newDocData, hospital[\"Doctors\"]);\n              });\n            }\n          });\n        } else {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let specialtyName = specialtyItem['Name'];\n            specialtyName = specialtyName.replace(\" \", \"\").toLowerCase();\n            specialtyItem['Hospital'].forEach(hospital => {\n              let locationZip = hospital['Zip'];\n\n              if (locationZip == locationInfo && userKeyWords == specialtyName) {\n                newHosData.push(hospital);\n                newDocData.push.apply(newDocData, hospital[\"Doctors\"]);\n              }\n            });\n          });\n        }\n      } else if (searchMethod == 'Doctor') {\n        if (locationInfo == '') {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let foundDoc = 0;\n            specialtyItem['Hospital'].forEach(hospital => {\n              let docName = hospital['Doctors'];\n              docName.forEach(doctor => {\n                let docName = doctor['DocName'].replace(\" \", \"\").toLowerCase();\n\n                if (docName == userKeyWords) {\n                  newDocData.push(doctor);\n\n                  if (foundDoc == 0) {\n                    newHosData.push(hospital);\n                  }\n\n                  foundDoc++;\n                }\n              });\n            });\n          });\n        } else {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let foundDoc = 0;\n            specialtyItem['Hospital'].forEach(hospital => {\n              let locationZip = hospital['Zip'];\n              let docName = hospital['Doctors'];\n              docName.forEach(doctor => {\n                let docName = doctor['DocName'];\n\n                if (docName.replace(\" \", \"\").toLowerCase() == userKeyWords.toLowerCase() && locationZip == locationInfo) {\n                  newDocData.push(doctor);\n                  foundDoc++;\n                }\n\n                if (foundDoc == 1) {\n                  newHosData.push(hospital);\n                }\n              });\n            });\n          });\n        }\n      } else if (searchMethod == 'Hospital') {\n        if (locationInfo == '') {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let foundTarget = true;\n            let hosList = specialtyItem['Hospital'];\n            hosList.forEach(hospital => {\n              let hosName = hospital['HospitalName'];\n              hosName = hosName.replace(\" \", \"\").toLowerCase();\n\n              if (userKeyWords.toLowerCase() == hosName) {\n                if (foundTarget) {\n                  newHosData.push(hospital);\n                }\n\n                newDocData.push.apply(newDocData, hospital[\"Doctors\"]);\n                foundTarget = false;\n              }\n            });\n          });\n        } else {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let foundTarget = true;\n            let hosList = specialtyItem['Hospital'];\n            hosList.forEach(hospital => {\n              let hosName = hospital['HospitalName'];\n              let locationZip = hospital['Zip'];\n              hosName = hosName.replace(\" \", \"\").toLowerCase();\n\n              if (userKeyWords.toLowerCase() == hosName && locationZip == locationInfo) {\n                if (foundTarget) {\n                  newHosData.push(hospital);\n                }\n\n                newDocData.push.apply(newDocData, hospital[\"Doctors\"]);\n                foundTarget = false;\n              }\n            });\n          });\n        }\n      } else {\n        if (locationInfo == '') {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let condtionList = specialtyItem['Condition'];\n            condtionList = condtionList.map(function (item) {\n              return item.toLowerCase();\n            });\n\n            if (condtionList.includes(userKeyWords)) {\n              specialtyItem[\"Hospital\"].forEach(hospital => {\n                newHosData.push(hospital);\n                hospital['Doctors'].forEach(doctor => {\n                  let docCondition = doctor['Conditions'];\n                  docCondition = docCondition.map(function (item) {\n                    return item.toLowerCase();\n                  });\n\n                  if (docCondition.includes(userKeyWords)) {\n                    newDocData.push(doctor);\n                  }\n                });\n              });\n            }\n          });\n        } else {\n          rootData[\"Specialty\"].forEach(specialtyItem => {\n            let condtionList = specialtyItem['Condition'];\n            condtionList = condtionList.map(function (item) {\n              return item.toLowerCase();\n            });\n            specialtyItem[\"Hospital\"].forEach(hospital => {\n              let locationZip = hospital['Zip'];\n\n              if (locationZip == locationInfo && condtionList.includes(userKeyWords)) {\n                newHosData.push(hospital);\n                hospital['Doctors'].forEach(doctor => {\n                  let docCondition = doctor['Conditions'];\n                  docCondition = docCondition.map(function (item) {\n                    return item.toLowerCase();\n                  });\n\n                  if (docCondition.includes(userKeyWords)) {\n                    newDocData.push(doctor);\n                  }\n                });\n              }\n            });\n          });\n        }\n      }\n\n      sethospitalInfo(newHosData);\n      setDocInfo(newDocData);\n      sethospitalInfoCopy(newHosData);\n      setDocInfoCopy(newDocData);\n\n      if (pageProps.history != null) {\n        // reset default search method\n        // getSearchMethod('Specialty');\n        // // getKeyWords('');\n        pageProps.history.push('/results');\n      }\n    }\n\n    return function resetSearchStatus() {\n      setSearchBegin(false);\n    };\n  };\n\n  const renderHome = renderProps => {\n    return /*#__PURE__*/React.createElement(Home, Object.assign({}, renderProps, {\n      setDocInfo: setDocInfo,\n      sethospitalInfo: sethospitalInfo,\n      doMainSearch: doMainSearch,\n      getLocationValue: getLocationValue,\n      getKeyWords: getKeyWords,\n      startSearch: startSearch,\n      getSearchMethod: getSearchMethod,\n      searchBegin: searchBegin,\n      setSearchMethod: setSearchMethod,\n      setKeywords: setKeywords,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 12\n      }\n    }));\n  };\n\n  const renderResults = renderProps => {\n    return /*#__PURE__*/React.createElement(Results, Object.assign({}, renderProps, {\n      setDocInfo: setDocInfo,\n      sethospitalInfo: sethospitalInfo,\n      docInfo: docInfo,\n      hospitalInfo: hospitalInfo,\n      doMainSearch: doMainSearch,\n      getLocationValue: getLocationValue,\n      getKeyWords: getKeyWords,\n      startSearch: startSearch,\n      searchBegin: searchBegin,\n      setSearchMethod: setSearchMethod,\n      setKeywords: setKeywords,\n      getSearchMethod: getSearchMethod,\n      filterHosType: filterHosType,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 415,\n        columnNumber: 12\n      }\n    }));\n  };\n\n  return /*#__PURE__*/React.createElement(MuiThemeProvider, {\n    theme: theme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Provider, {\n    store: store,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: renderHome,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/login\",\n    component: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 440,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(AuthRoute, {\n    exact: true,\n    path: \"/signup\",\n    component: signup,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 441,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/covid19\",\n    component: covid,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/results\",\n    render: renderResults,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 443,\n      columnNumber: 15\n    }\n  }))))));\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/andychenhe/Desktop/mydoc_25/src/App.js"],"names":["React","axios","BrowserRouter","Router","Switch","Route","jwtDecode","AuthRoute","useState","ThemeProvider","MuiThemeProvider","createMuiTheme","themeFile","Provider","store","SET_AUTHENTICATED","logoutUser","getUserData","Home","login","signup","covid","Results","theme","defaults","baseURL","token","localStorage","FBIdToken","dispatch","decodedToken","exp","Date","now","window","location","href","type","headers","common","App","docInfo","setDocInfo","hospitalInfo","sethospitalInfo","docInfoCopy","setDocInfoCopy","hospitalInfoCopy","sethospitalInfoCopy","searchMethod","setSearchMethod","keywords","setKeywords","setLocation","searchBegin","setSearchBegin","hosType","setHosType","LanguageList","setLanguageList","yearOfPractice","setyearOfPractice","filterlocation","setFilterlocation","getLocationValue","value","getKeyWords","getSearchMethod","startSearch","filterHosType","console","log","filterFunction","newDocList","newHospitalList","forEach","doctor","validateType","toLowerCase","push","doMainSearch","pageProps","rootData","newDocData","newHosData","userKeyWords","replace","locationInfo","specialtyItem","specialtyName","hospital","apply","locationZip","foundDoc","docName","foundTarget","hosList","hosName","condtionList","map","item","includes","docCondition","history","resetSearchStatus","renderHome","renderProps","renderResults"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport \"./css/login.css\";\nimport axios from \"axios\";\nimport { BrowserRouter as Router, Switch, Route } from \"react-router-dom\";\nimport jwtDecode from \"jwt-decode\";\nimport AuthRoute from \"./util/AuthRoute\";\nimport { useState } from \"react\";\n\n\n// material ui theme\nimport { ThemeProvider as MuiThemeProvider } from \"@material-ui/core/styles\";\nimport createMuiTheme from \"@material-ui/core/styles/createMuiTheme\";\nimport themeFile from \"./util/theme\";\n\n//redux\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\nimport { SET_AUTHENTICATED } from \"./redux/types\";\nimport { logoutUser, getUserData } from \"./redux/actions/userActions\";\n\n// pages\nimport Home from \"./pages/Home\";\nimport login from \"./pages/Login\";\nimport signup from \"./pages/Signup\";\nimport covid from \"./pages/Covid\";\nimport Results from \"./pages/Results\";\n\n// use themeFile from theme.js\nconst theme = createMuiTheme(themeFile);\n\n// set up api\naxios.defaults.baseURL =\n  \"https://us-central1-mydoc-f3cd9.cloudfunctions.net/api/\";\n\n// backend stuff\nconst token = localStorage.FBIdToken;\nstore.dispatch(getUserData());\n\nif (token) {\n  const decodedToken = jwtDecode(token);\n  // log user out when expire\n  if (decodedToken.exp * 1000 < Date.now()) {\n    store.dispatch(logoutUser());\n    window.location.href = \"/login\";\n  } else {\n    store.dispatch({ type: SET_AUTHENTICATED });\n    axios.defaults.headers.common[\"Authorization\"] = token; //deal with page refresh\n    store.dispatch(getUserData()); // get user data if logged in\n  }\n}\n\n// set up material ui theme\n// route to home/login/sign up\nfunction App() {\n  const [docInfo, setDocInfo] = useState([]);\n  const [hospitalInfo, sethospitalInfo] = useState([]);\n  const [docInfoCopy, setDocInfoCopy] = useState([]);\n  const [hospitalInfoCopy, sethospitalInfoCopy] = useState([]);\n  const [searchMethod, setSearchMethod] = React.useState(\"Specialty\");\n  const [keywords, setKeywords] = React.useState('');\n  const [location, setLocation] = React.useState('');\n  const [searchBegin, setSearchBegin] = React.useState(false);\n  const [hosType, setHosType] = React.useState('both');\n  const [LanguageList, setLanguageList] = React.useState([]);\n  const [yearOfPractice, setyearOfPractice] = React.useState([-1,-1]);\n  const [filterlocation, setFilterlocation] = React.useState([]);\n\n\n  const getLocationValue = (value) => {\n    setLocation(value);\n  }\n\n  const getKeyWords = (value) => {\n    setKeywords(value);\n  }\n\n  const getSearchMethod = (value) => {\n    setSearchMethod(value);\n    setKeywords('');\n  }\n\n  const startSearch = () => {\n    setSearchBegin(true);\n  }\n\n  const filterHosType = (type) => {\n    console.log(type);\n    setHosType(type);\n    filterFunction();\n\n  }\n\n  const filterFunction = () => {\n    console.log('filter begin');\n    let newDocList = [];\n    let newHospitalList = [];\n    docInfoCopy.forEach((doctor) => {\n      let validateType = doctor['Type'].toLowerCase() == hosType || doctor['Type'].toLowerCase() == 'both';\n      console.log(doctor['Type'].toLowerCase() == hosType);\n      if (validateType){\n        newDocList.push(doctor); \n      }\n    })\n    console.log(newDocList);\n    setDocInfo(newDocList);\n  }\n\n\n\n  const doMainSearch = (pageProps) => {\n    if (searchBegin){\n      let rootData = {\n        \"Specialty\" : [{\n          \"Name\" : \"Gastroenterology\",\n          \"Condition\" : [\"Fever\", \"Headache\"],\n          \"Hospital\" : [{\n            \"HospitalName\" : \"Pantai Hospital Kuala Lumpur\",\n            \"HospitalType\" : \"Private\",\n            \"likes\": 10000000,\n            \"RelateSpecialty\" : \"Gastroenterology\",\n            \"Web\" : \"https://www.pantai.com.my/kuala-lumpur\",\n            \"Hours\" : \"24 hours\",\n            \"Address\" : \"8, Jalan Bukit Pantai 59100 Kuala Lumpur\",\n            \"Zip\" : \"92310\",\n            \"Phone\" : \"+603-2296 0888\",\n            \"Tags\" : [\n              {\n                \"TagName\" : \"Customer Service\",\n                \"Number\": 2\n              },\n              {\n                \"TagName\" : \"Facility\",\n                \"Number\": 3\n              },\n              {\n                \"TagName\" : \"Friendly\",\n                \"Number\": 5\n              }\n            ],\n            \"Insurance\" : [\"Asia Assistance Network\", \"AIA\", \"AIA - Employee Benefit\", \"AIA Datalink\"],\n            \"Doctors\" : [{\n              \"DocName\" : \"Alex Leow\",\n              \"Specialty\" : \"Gastroenterology\",\n              \"Hospital\" : \"Pantai Hospital Kuala Lumpur\",\n              \"YearsofPractice\" : 7,\n              \"Address\" : \"No. A103a - Endoscopy Centre, 1st Floor, Block A, 8, Jalan Bukit Pantai 59100 Kuala Lumpur\",\n              \"Phone\" : \" +603-2296 0763 Ext. 2763\",\n              \"Tags\" : [\n                {\n                  \"TagName\" : \"Bedside Manner\",\n                  \"Number\": 1\n                },\n                {\n                  \"TagName\" : \"Enthusiastic\",\n                  \"Number\": 10\n                },\n                {\n                  \"TagName\" : \"Friendly\",\n                  \"Number\": 5\n                }\n              ],\n              \"Appointment\" : {\n                \"Onsite\" : {\n                  \"Status\": \"Active\"\n                },\n                \"PhoneCall\" : {\n                  \"Content\": \"206-123-4567\",\n                  \"Status\": \"\"\n                },\n                \"Online\" : {\n                  \"Content\": \"https://www.pantai.com.my/kuala-lumpur\",\n                  \"Status\": \"Active\"\n                },\n                \"Email\" : {\n                  \"Content\": \"chenh57@uw.edu\",\n                  \"Status\": \"Active\"\n                }\n              },\n              \"Qulification\":\"MMed (Mal), MB. BCh. BAO. (Hons) LRCPI & LRCSI (Ire), B. Biomed Sci. (Hons) (UM)\",\n              \"Language\" : [\"English\", \"Mandarin\", \"Malay\", \"Hokkien\", \"Cantonese\"],\n              \"Type\": \"Private\",\n              \"Procedures\" : [\"Colonoscopy\", \"Gastroscopy\", \"Endoscopic Retrograde Cholangiopancreatography (ERCP)\", \"Fibroscan\", \"Liver Biopsy\", \"Endoscopic Ultrasound (EUS)\", \"Small Bowel Enteroscopy\", \"Capsule Endoscopy\"],\n              \"Conditions\" : [\"Helicobacter Pylori Infection\", \"Dyspepsia\", \"Gastro Esophageal Reflux Disease\", \"Fever\"],\n              \"NumberOfLikes\" : 12315\n            },\n            {\n                \"DocName\" : \"Alex Tan\",\n                \"Specialty\" : \"Gastroenterology\",\n                \"Hospital\" : \"Pantai Hospital Kuala Lumpur\",\n                \"YearsofPractice\" : 7,\n                \"Address\" : \"No. A103a - Endoscopy Centre, 1st Floor, Block A, 8, Jalan Bukit Pantai 59100 Kuala Lumpur\",\n                \"Phone\" : \" +603-123-2131\",\n                \"Tags\" : [\n                  {\n                    \"TagName\" : \"Bedside Manner\",\n                    \"Number\": 1\n                  },\n                  {\n                    \"TagName\" : \"Enthusiastic\",\n                    \"Number\": 10\n                  },\n                  {\n                    \"TagName\" : \"Friendly\",\n                    \"Number\": 5\n                  }\n                ],\n                \"Appointment\" : {\n                  \"Onsite\" : {\n                    \"Status\": \"Active\"\n                  },\n                  \"PhoneCall\" : {\n                    \"Content\": \"206-123-4567\",\n                    \"Status\": \"\"\n                  },\n                  \"Online\" : {\n                    \"Content\": \"https://www.pantai.com.my/kuala-lumpur\",\n                    \"Status\": \"Active\"\n                  },\n                  \"Email\" : {\n                    \"Content\": \"chenh57@uw.edu\",\n                    \"Status\": \"Active\"\n                  }\n                },\n                \"Qulification\":\"MMed (Mal), MB. BCh. BAO. (Hons) LRCPI & LRCSI (Ire), B. Biomed Sci. (Hons) (UM)\",\n                \"Language\" : [\"English\", \"Cantonese\"],\n                \"Type\": \"Private\",\n                \"Procedures\" : [\"Colonoscopy\", \"Gastroscopy\", \"Endoscopic Retrograde Cholangiopancreatography (ERCP)\", \"Fibroscan\", \"Liver Biopsy\", \"Endoscopic Ultrasound (EUS)\", \"Small Bowel Enteroscopy\", \"Capsule Endoscopy\"],\n                \"Conditions\" : [\"Helicobacter Pylori Infection\", \"Dyspepsia\", \"Gastro Esophageal Reflux Disease\"],\n                \"NumberOfLikes\" : 2333\n              }]\n          }]\n        }]\n      };          \n      let newDocData = [];\n      let newHosData = [];\n      let userKeyWords = keywords.replace(\" \", \"\").toLowerCase();\n      let locationInfo = location.replace(\" \", \"\");\n      if(searchMethod == 'Specialty'){\n          if (locationInfo == ''){\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let specialtyName = specialtyItem['Name'];\n                  specialtyName = specialtyName.replace(\" \", \"\").toLowerCase();\n                  if (userKeyWords == specialtyName){\n                      specialtyItem['Hospital'].forEach((hospital)=> {\n                          newHosData.push(hospital);\n                          newDocData.push.apply(newDocData,hospital[\"Doctors\"] )\n                      });\n                  }\n              });\n          } else {\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let specialtyName = specialtyItem['Name'];\n                  specialtyName = specialtyName.replace(\" \", \"\").toLowerCase();\n                  specialtyItem['Hospital'].forEach((hospital)=> {\n                      let locationZip = hospital['Zip'];\n                      if (locationZip == locationInfo && userKeyWords == specialtyName){\n                          newHosData.push(hospital);\n                          newDocData.push.apply(newDocData,hospital[\"Doctors\"] );\n                      }\n                  });\n              });\n          } \n      }  else if (searchMethod == 'Doctor'){\n          if (locationInfo == ''){\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let foundDoc = 0;\n                  specialtyItem['Hospital'].forEach((hospital)=>{\n                      let docName = hospital['Doctors'];\n                      docName.forEach((doctor) => {\n                          let docName = doctor['DocName'].replace(\" \", \"\").toLowerCase()\n                          if (docName == userKeyWords){\n                              newDocData.push(doctor);\n                              if (foundDoc == 0){\n                                newHosData.push(hospital);\n                              }\n                              foundDoc ++;\n                          }\n\n                      });\n                  })\n              });\n          } else {\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let foundDoc = 0;\n                  specialtyItem['Hospital'].forEach((hospital)=>{\n                      let locationZip = hospital['Zip'];\n                      let docName = hospital['Doctors'];\n                      docName.forEach((doctor) => {\n                          let docName = doctor['DocName']\n                          if (docName.replace(\" \", \"\").toLowerCase() == userKeyWords.toLowerCase() && locationZip == locationInfo){\n                              newDocData.push(doctor);\n                              foundDoc ++;\n                          }\n                          if (foundDoc == 1){\n                              newHosData.push(hospital);\n                          }\n                      });\n                  })\n              });\n          } \n      } else if (searchMethod == 'Hospital'){\n          if (locationInfo == ''){\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let foundTarget = true;\n                  let hosList = specialtyItem['Hospital'];\n                  hosList.forEach((hospital) => {\n                      let hosName = hospital['HospitalName'];\n                      hosName = hosName.replace(\" \", \"\").toLowerCase();\n                      if (userKeyWords.toLowerCase() == hosName){\n                          if (foundTarget){\n                              newHosData.push(hospital);\n                          }\n                          newDocData.push.apply(newDocData,hospital[\"Doctors\"]);\n                          foundTarget = false;\n                      }\n                  })\n              });\n          } else {\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let foundTarget = true;\n                  let hosList = specialtyItem['Hospital'];\n                  hosList.forEach((hospital) => {\n                      let hosName = hospital['HospitalName'];\n                      let locationZip = hospital['Zip'];\n                      hosName = hosName.replace(\" \", \"\").toLowerCase();\n                      if (userKeyWords.toLowerCase() == hosName && locationZip == locationInfo){\n                          if (foundTarget){\n                              newHosData.push(hospital);\n                          }\n                          newDocData.push.apply(newDocData,hospital[\"Doctors\"]);\n                          foundTarget = false;\n                      }\n                  })\n              });\n          } \n\n      } else {\n          if (locationInfo == ''){\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let condtionList = specialtyItem['Condition'];\n                  condtionList = condtionList.map(function(item) { return item.toLowerCase(); });\n                  if (condtionList.includes(userKeyWords)){\n                      specialtyItem[\"Hospital\"].forEach((hospital) => {\n                          newHosData.push(hospital);\n                          hospital['Doctors'].forEach((doctor) => {\n                              let docCondition = doctor['Conditions'];\n                              docCondition = docCondition.map(function(item) { return item.toLowerCase(); });\n                              if (docCondition.includes(userKeyWords)){\n                                  newDocData.push(doctor);\n                              }\n                          });\n                      })\n                  }\n              });\n          } else {\n              rootData[\"Specialty\"].forEach(specialtyItem => {\n                  let condtionList = specialtyItem['Condition'];\n                  condtionList = condtionList.map(function(item) { return item.toLowerCase(); });\n                  specialtyItem[\"Hospital\"].forEach((hospital) => {\n                      let locationZip = hospital['Zip'];\n                      if (locationZip == locationInfo && condtionList.includes(userKeyWords)){\n                          newHosData.push(hospital);\n                          hospital['Doctors'].forEach((doctor) => {\n                              let docCondition = doctor['Conditions'];\n                              docCondition = docCondition.map(function(item) { return item.toLowerCase(); });\n                              if (docCondition.includes(userKeyWords)){\n                                  newDocData.push(doctor);\n                              }\n                          });\n                      }\n\n                  });\n              });\n          } \n      }\n      sethospitalInfo(newHosData);\n      setDocInfo(newDocData);\n      sethospitalInfoCopy(newHosData);\n      setDocInfoCopy(newDocData);\n      if (pageProps.history != null){\n        // reset default search method\n        // getSearchMethod('Specialty');\n        // // getKeyWords('');\n        pageProps.history.push('/results');\n      }\n\n    }\n    \n    return function resetSearchStatus(){\n      setSearchBegin(false);\n    }\n\n  }\n\n\n\n\n\n\n  const renderHome = (renderProps) => {\n    return <Home {...renderProps} \n                    setDocInfo={setDocInfo} \n                    sethospitalInfo={sethospitalInfo} \n                    doMainSearch={doMainSearch}\n                    getLocationValue={getLocationValue}\n                    getKeyWords={getKeyWords}\n                    startSearch={startSearch}\n                    getSearchMethod={getSearchMethod}\n                    searchBegin={searchBegin}\n                    setSearchMethod={setSearchMethod}\n                    setKeywords={setKeywords}\n                   />\n  }\n  const renderResults = (renderProps) => {\n    return <Results {...renderProps} \n                      setDocInfo={setDocInfo} \n                      sethospitalInfo={sethospitalInfo} \n                      docInfo={docInfo} \n                      hospitalInfo ={hospitalInfo}\n                      doMainSearch={doMainSearch}\n                      getLocationValue={getLocationValue}\n                      getKeyWords={getKeyWords}\n                      startSearch={startSearch}\n                      searchBegin={searchBegin}\n                      setSearchMethod={setSearchMethod}\n                      setKeywords={setKeywords}\n                      getSearchMethod={getSearchMethod}\n                      filterHosType ={filterHosType}\n                      />\n                      \n  }\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      <Provider store={store}>\n        <Router>\n          <Switch>\n            <div className=\"container\">\n              <Route exact path=\"/\" render={renderHome}></Route>\n              <AuthRoute exact path=\"/login\" component={login} />\n              <AuthRoute exact path=\"/signup\" component={signup} />\n              <Route exact path=\"/covid19\" component={covid}></Route>\n              <Route exact path=\"/results\" render={renderResults}></Route>\n            </div>\n          </Switch>\n        </Router>\n      </Provider>\n    </MuiThemeProvider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}