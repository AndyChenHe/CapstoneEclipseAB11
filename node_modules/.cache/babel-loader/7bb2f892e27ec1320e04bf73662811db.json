{"ast":null,"code":"import _classCallCheck from\"/Users/andychenhe/Desktop/may8-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andychenhe/Desktop/may8-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/andychenhe/Desktop/may8-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/andychenhe/Desktop/may8-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import _defineProperty from\"/Users/andychenhe/Desktop/may8-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/andychenhe/Desktop/may8-test/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import React,{Component}from\"react\";import{Link}from\"react-router-dom\";import axios from\"axios\";// material ui\nimport withStyles from\"@material-ui/core/styles/withStyles\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import CircularProgress from\"@material-ui/core/CircularProgress\";import Box from\"@material-ui/core/Box\";// Doctor heart background\nimport Bg from\"../img/login/doctors-heart.png\";//redux\nimport{connect}from\"react-redux\";import{loginUser}from\"../redux/actions/userActions\";import store from\"../redux/store\";import{SET_AUTHENTICATED}from\"../redux/types\";// components\nimport Navbar from\"../Components/Navbar\";import CovidAlert from\"../Components/Alert\";// material ui style\nvar styles=function styles(theme){var _bg;return _objectSpread({},theme.auth,{bg:(_bg={},_defineProperty(_bg,theme.breakpoints.down(\"md\"),{display:\"none\"}),_defineProperty(_bg,\"width\",\"300px\"),_defineProperty(_bg,\"height\",\"300px\"),_defineProperty(_bg,\"position\",\"fixed\"),_defineProperty(_bg,\"margin\",0),_defineProperty(_bg,\"padding\",0),_defineProperty(_bg,\"right\",-120),_defineProperty(_bg,\"bottom\",0),_bg),covidBox:_defineProperty({marginTop:64},theme.breakpoints.down(\"sm\"),{marginTop:20,marginLeft:20,marginRight:20})});};// Login page\nvar Login=/*#__PURE__*/function(_Component){_inherits(Login,_Component);var _super=_createSuper(Login);function Login(){var _this;_classCallCheck(this,Login);_this=_super.call(this);_this.handleSubmit=function(event){event.preventDefault();var userData={email:_this.state.email,password:_this.state.password};_this.props.loginUser(userData,_this.props.history);};_this.handleChange=function(event){_this.setState(_defineProperty({},event.target.name,event.target.value));};_this.state={email:\"\",password:\"\",errors:{}};return _this;}_createClass(Login,[{key:\"componentDidUpdate\",value:function componentDidUpdate(){var token=localStorage.FBIdToken;if(token){store.dispatch({type:SET_AUTHENTICATED});axios.defaults.headers.common[\"Authorization\"]=token;}}},{key:\"render\",value:function render(){var _this$props=this.props,classes=_this$props.classes,loading=_this$props.UI.loading;var errors=this.state.errors;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Navbar,{currentPage:\"Signup\"}),/*#__PURE__*/React.createElement(\"div\",{className:classes.covidBox},/*#__PURE__*/React.createElement(CovidAlert,null),/*#__PURE__*/React.createElement(Grid,{container:true,className:classes.form},/*#__PURE__*/React.createElement(Grid,{item:true,xs:1,sm:2,md:4}),/*#__PURE__*/React.createElement(Grid,{item:true,xs:10,sm:8,md:4},/*#__PURE__*/React.createElement(Box,{display:\"flex\",flexDirection:\"column\",justifyContent:\"center\"},/*#__PURE__*/React.createElement(Typography,{className:classes.pageTitle},\"Log in\"),/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(TextField,{id:\"email\",name:\"email\",type:\"email\",label:\"Email address\",className:classes.textField,helperText:errors.email,error:errors.email?true:false,value:this.state.email,onChange:this.handleChange,fullWidth:true,variant:\"outlined\"}),/*#__PURE__*/React.createElement(TextField,{id:\"password\",name:\"password\",type:\"password\",label:\"Password\",className:classes.textField,helperText:errors.password,error:errors.password?true:false,value:this.state.password,onChange:this.handleChange,fullWidth:true,variant:\"outlined\"}),errors.general&&/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",className:classes.customError},errors.general),/*#__PURE__*/React.createElement(Button,{type:\"submit\",variant:\"contained\",color:\"secondary\",className:classes.button,fullWidth:true,size:\"large\",disabled:loading},\"Log in\",loading&&/*#__PURE__*/React.createElement(CircularProgress,{size:30,className:classes.progress,color:\"secondary\"})),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\"},\"Don't have an account?\",\" \",/*#__PURE__*/React.createElement(Link,{to:\"/signup\",style:{color:\"#003367\"},className:classes.link},\"Sign up\"))))),/*#__PURE__*/React.createElement(Grid,{item:true,xs:1,sm:2,md:4}),/*#__PURE__*/React.createElement(\"img\",{src:Bg,alt:\"doctor-hearts\",className:classes.bg}))));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(props,state){if(props.UI.errors){return{errors:props.UI.errors};}return null;}}]);return Login;}(Component);var mapStateToProps=function mapStateToProps(state){return{user:state.user,UI:state.UI};};export default connect(mapStateToProps,{loginUser:loginUser})(withStyles(styles)(Login));","map":{"version":3,"sources":["/Users/andychenhe/Desktop/may8-test/src/pages/Login.js"],"names":["React","Component","Link","axios","withStyles","Grid","Typography","TextField","Button","CircularProgress","Box","Bg","connect","loginUser","store","SET_AUTHENTICATED","Navbar","CovidAlert","styles","theme","auth","bg","breakpoints","down","display","covidBox","marginTop","marginLeft","marginRight","Login","handleSubmit","event","preventDefault","userData","email","state","password","props","history","handleChange","setState","target","name","value","errors","token","localStorage","FBIdToken","dispatch","type","defaults","headers","common","classes","loading","UI","form","pageTitle","textField","general","customError","button","progress","color","link","mapStateToProps","user"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport axios from \"axios\";\n\n// material ui\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from \"@material-ui/core/Button\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport Box from \"@material-ui/core/Box\";\n\n// Doctor heart background\nimport Bg from \"../img/login/doctors-heart.png\";\n\n//redux\nimport { connect } from \"react-redux\";\nimport { loginUser } from \"../redux/actions/userActions\";\nimport store from \"../redux/store\";\nimport { SET_AUTHENTICATED } from \"../redux/types\";\n\n// components\nimport Navbar from \"../Components/Navbar\";\nimport CovidAlert from \"../Components/Alert\";\n\n// material ui style\nconst styles = (theme) => ({\n  ...theme.auth,\n  bg: {\n    [theme.breakpoints.down(\"md\")]: {\n      display: \"none\",\n    },\n    width: \"300px\",\n    height: \"300px\",\n    position: \"fixed\",\n    margin: 0,\n    padding: 0,\n    right: -120,\n    bottom: 0,\n  },\n\n  covidBox: {\n    marginTop: 64,\n    [theme.breakpoints.down(\"sm\")]: {\n      marginTop: 20,\n      marginLeft: 20,\n      marginRight: 20,\n    },\n  },\n});\n\n// Login page\nclass Login extends Component {\n  constructor() {\n    super();\n    this.state = {\n      email: \"\",\n      password: \"\",\n      errors: {},\n    };\n  }\n\n  static getDerivedStateFromProps(props, state) {\n    if (props.UI.errors) {\n      return {\n        errors: props.UI.errors,\n      };\n    }\n    return null;\n  }\n\n  componentDidUpdate() {\n    const token = localStorage.FBIdToken;\n    if (token) {\n      store.dispatch({ type: SET_AUTHENTICATED });\n      axios.defaults.headers.common[\"Authorization\"] = token;\n    }\n  }\n\n  handleSubmit = (event) => {\n    event.preventDefault();\n    const userData = {\n      email: this.state.email,\n      password: this.state.password,\n    };\n    this.props.loginUser(userData, this.props.history);\n  };\n\n  handleChange = (event) => {\n    this.setState({\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  render() {\n    const {\n      classes,\n      UI: { loading },\n    } = this.props;\n    const { errors } = this.state;\n    return (\n      <div>\n        <Navbar currentPage=\"Signup\" />\n        <div className={classes.covidBox}>\n          <CovidAlert />\n\n          <Grid container className={classes.form}>\n            <Grid item xs={1} sm={2} md={4} />\n            <Grid item xs={10} sm={8} md={4}>\n              <Box\n                display=\"flex\"\n                flexDirection=\"column\"\n                justifyContent=\"center\"\n              >\n                <Typography className={classes.pageTitle}>Log in</Typography>\n                <form noValidate onSubmit={this.handleSubmit}>\n                  <TextField\n                    id=\"email\"\n                    name=\"email\"\n                    type=\"email\"\n                    label=\"Email address\"\n                    className={classes.textField}\n                    helperText={errors.email}\n                    error={errors.email ? true : false}\n                    value={this.state.email}\n                    onChange={this.handleChange}\n                    fullWidth\n                    variant=\"outlined\"\n                  />\n                  <TextField\n                    id=\"password\"\n                    name=\"password\"\n                    type=\"password\"\n                    label=\"Password\"\n                    className={classes.textField}\n                    helperText={errors.password}\n                    error={errors.password ? true : false}\n                    value={this.state.password}\n                    onChange={this.handleChange}\n                    fullWidth\n                    variant=\"outlined\"\n                  />\n                  {errors.general && (\n                    <Typography variant=\"body2\" className={classes.customError}>\n                      {errors.general}\n                    </Typography>\n                  )}\n                  <Button\n                    type=\"submit\"\n                    variant=\"contained\"\n                    color=\"secondary\"\n                    className={classes.button}\n                    fullWidth\n                    size=\"large\"\n                    disabled={loading}\n                  >\n                    Log in\n                    {loading && (\n                      <CircularProgress\n                        size={30}\n                        className={classes.progress}\n                        color=\"secondary\"\n                      />\n                    )}\n                  </Button>\n\n                  <Typography variant=\"body2\">\n                    Don't have an account?{\" \"}\n                    <Link\n                      to=\"/signup\"\n                      style={{ color: \"#003367\" }}\n                      className={classes.link}\n                    >\n                      Sign up\n                    </Link>\n                  </Typography>\n                </form>\n              </Box>\n            </Grid>\n            <Grid item xs={1} sm={2} md={4} />\n            <img src={Bg} alt=\"doctor-hearts\" className={classes.bg} />\n          </Grid>\n        </div>\n      </div>\n    );\n  }\n}\n\nLogin.propTypes = {\n  classes: PropTypes.object.isRequired,\n  loginUser: PropTypes.func.isRequired,\n  user: PropTypes.object.isRequired,\n  UI: PropTypes.object.isRequired,\n};\n\nconst mapStateToProps = (state) => ({\n  user: state.user,\n  UI: state.UI,\n});\n\nexport default connect(mapStateToProps, { loginUser })(\n  withStyles(styles)(Login)\n);\n"]},"metadata":{},"sourceType":"module"}