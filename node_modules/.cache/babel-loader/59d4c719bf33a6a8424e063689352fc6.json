{"ast":null,"code":"import{SET_USER,SET_ERRORS,CLEAR_ERRORS,LOADING_UI,SET_UNAUTHENTICATED,LOADING_USER}from\"../types\";import axios from\"axios\";//loginUser is used in Login.js\nexport var loginUser=function loginUser(userData,history){return function(dispatch){//send action with type LOADING_UI and catch the action in reducer\ndispatch({type:LOADING_UI});axios.post(\"/login\",userData).then(function(res){//send request to server\nsetAuthorizationHeader(res.data.token);dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push(\"/\");}).catch(function(err){dispatch({type:SET_ERRORS,payload:err.response.data});});};};// used in GeneralSignup.js\nexport var signupGeneralUser=function signupGeneralUser(newGeneralUserData,history){return function(dispatch){//send action with type LOADING_UI and catch the action in reducer\ndispatch({type:LOADING_UI});axios.post(\"/generalsignup\",newGeneralUserData).then(function(res){setAuthorizationHeader(res.data.token);dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push(\"/\");}).catch(function(err){if(err.response){dispatch({type:SET_ERRORS,payload:err.response.data});}});};};//used in DoctorSignup.js\nexport var signupDoctorUser=function signupDoctorUser(newDoctorUserData,history){return function(dispatch){//send action with type LOADING_UI and catch the action in reducer\ndispatch({type:LOADING_UI});axios.post(\"/doctorsignup\",newDoctorUserData).then(function(res){setAuthorizationHeader(res.data.token);dispatch(getUserData());dispatch({type:CLEAR_ERRORS});history.push(\"/\");}).catch(function(err){if(err.response){dispatch({type:SET_ERRORS,payload:err.response.data});}});};};var setAuthorizationHeader=function setAuthorizationHeader(token){var FBIdToken=\"Bearer \".concat(token);localStorage.setItem(\"FBIdToken\",FBIdToken);axios.defaults.headers.common[\"Authorization\"]=FBIdToken;};// Used in UserMenu.js for logging out user\nexport var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem(\"FBIdToken\");//remove from axios header\ndelete axios.defaults.headers.common[\"Authorization\"];dispatch({type:SET_UNAUTHENTICATED});};};// used in App.js to fetch user data\nexport var getUserData=function getUserData(){return function(dispatch){dispatch({type:LOADING_USER});axios.get(\"/user\").then(function(res){dispatch({type:SET_USER/* use in userReducer.js */,payload:res.data});}).catch(function(err){return console.log(err);});};};// 这一页只加了这个function 连着的是docAccountverification.js\nexport var updateVerification=function updateVerification(newVerification){return function(dispatch){dispatch({type:LOADING_USER});axios.post(\"/verification\",newVerification).then(function(){dispatch(getUserData());}).catch(function(err){return console.log(err);});};};","map":{"version":3,"sources":["/Users/andychenhe/Desktop/CapstoneEclipseAB11/src/redux/actions/userActions.js"],"names":["SET_USER","SET_ERRORS","CLEAR_ERRORS","LOADING_UI","SET_UNAUTHENTICATED","LOADING_USER","axios","loginUser","userData","history","dispatch","type","post","then","res","setAuthorizationHeader","data","token","getUserData","push","catch","err","payload","response","signupGeneralUser","newGeneralUserData","signupDoctorUser","newDoctorUserData","FBIdToken","localStorage","setItem","defaults","headers","common","logoutUser","removeItem","get","console","log","updateVerification","newVerification"],"mappings":"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","sourcesContent":["import {\n  SET_USER,\n  SET_ERRORS,\n  CLEAR_ERRORS,\n  LOADING_UI,\n  SET_UNAUTHENTICATED,\n  LOADING_USER,\n} from \"../types\";\nimport axios from \"axios\";\n\n//loginUser is used in Login.js\nexport const loginUser = (userData, history) => (dispatch) => {\n  //send action with type LOADING_UI and catch the action in reducer\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/login\", userData)\n    .then((res) => {\n      //send request to server\n      setAuthorizationHeader(res.data.token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(`/`);\n    })\n    .catch((err) => {\n      dispatch({\n        type: SET_ERRORS,\n        payload: err.response.data,\n      });\n    });\n};\n\n// used in GeneralSignup.js\nexport const signupGeneralUser = (newGeneralUserData, history) => (\n  dispatch\n) => {\n  //send action with type LOADING_UI and catch the action in reducer\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/generalsignup\", newGeneralUserData)\n    .then((res) => {\n      setAuthorizationHeader(res.data.token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(`/`);\n    })\n    .catch((err) => {\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data,\n        });\n      }\n    });\n};\n\n//used in DoctorSignup.js\nexport const signupDoctorUser = (newDoctorUserData, history) => (dispatch) => {\n  //send action with type LOADING_UI and catch the action in reducer\n  dispatch({ type: LOADING_UI });\n  axios\n    .post(\"/doctorsignup\", newDoctorUserData)\n    .then((res) => {\n      setAuthorizationHeader(res.data.token);\n      dispatch(getUserData());\n      dispatch({ type: CLEAR_ERRORS });\n      history.push(`/`);\n    })\n    .catch((err) => {\n      if (err.response) {\n        dispatch({\n          type: SET_ERRORS,\n          payload: err.response.data,\n        });\n      }\n    });\n};\n\nconst setAuthorizationHeader = (token) => {\n  const FBIdToken = `Bearer ${token}`;\n  localStorage.setItem(\"FBIdToken\", FBIdToken);\n  axios.defaults.headers.common[\"Authorization\"] = FBIdToken;\n};\n\n// Used in UserMenu.js for logging out user\nexport const logoutUser = () => (dispatch) => {\n  localStorage.removeItem(\"FBIdToken\");\n  //remove from axios header\n  delete axios.defaults.headers.common[\"Authorization\"];\n  dispatch({ type: SET_UNAUTHENTICATED });\n};\n\n// used in App.js to fetch user data\nexport const getUserData = () => (dispatch) => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .get(\"/user\")\n    .then((res) => {\n      dispatch({\n        type: SET_USER /* use in userReducer.js */,\n        payload: res.data,\n      });\n    })\n    .catch((err) => console.log(err));\n};\n\n// 这一页只加了这个function 连着的是docAccountverification.js\nexport const updateVerification = (newVerification) => (dispatch) => {\n  dispatch({ type: LOADING_USER });\n  axios\n    .post(\"/verification\", newVerification)\n    .then(() => {\n      dispatch(getUserData());\n    })\n    .catch((err) => console.log(err));\n};\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}